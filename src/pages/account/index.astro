---
import type { FormResponseData } from '@/components/team/AddTeamBtnComponents'

import AccountLayout from '@/layouts/account/AccountLayout.astro'

import { TeamsContainer } from '@/containers/accounts/TeamsContainer'
import { getTeamsByUser } from '@/db/models/team'

const csrfToken: string = Astro.locals.csrfToken!
const user = Astro.locals.user!
const teams = (await getTeamsByUser({
  userId: user.id,
  fields: ['name', 'slug'],
})) as FormResponseData[]
---

<AccountLayout>
  <TeamsContainer csrfToken={csrfToken} initTeams={teams} client:load />
</AccountLayout>
