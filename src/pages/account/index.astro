---
import type { Team } from '@/db/models/team'

import AccountLayout from '@/layouts/account/account-layout.astro'

import { TeamsContainer } from '@/containers/accounts/teams-container'
import { getTeamsByUser } from '@/db/models/team'

const csrfToken: string = Astro.locals.csrfToken!
const user = Astro.locals.user!
const teams: Team[] = await getTeamsByUser({ userId: user.id })
---

<AccountLayout>
  <TeamsContainer csrfToken={csrfToken} initTeams={teams} client:load />
</AccountLayout>
